---
kind: pipeline
name: default

steps:
- name: deploy
  image: node
  commands:
    - npm install gh-pages --save-dev
    - npm run generate
    - npm run deploy

- name: notify
  image: drillster/drone-email
  settings:
    from: ci@lecat.io
    host: mail.lecat.io
    secrets: [ email_username, email_password ]
  when:
    status:
    - failure

trigger:
  branch:
  - master
  event:
  - push
